

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>compiler_gym/envs/llvm/service &mdash; CompilerGym 0.1.9 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../../../../about.html" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="compiler_gym/service" href="../../service.html" />
    <link rel="prev" title="compiler_gym.wrappers" href="../../../../compiler_gym/wrappers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> CompilerGym
          

          
          </a>

          
            
            
              <div class="version">
                0.1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../llvm/index.html">LLVM Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rpc.html">RPC Service Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Frequently Asked Questions</a></li>
</ul>
<p><span class="caption-text">Python API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/compiler_gym.html">compiler_gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/datasets.html">compiler_gym.datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/envs.html">compiler_gym.envs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../llvm/api.html">compiler_gym.envs.llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/leaderboard.html">compiler_gym.leaderboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/service.html">compiler_gym.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/spaces.html">compiler_gym.spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/views.html">compiler_gym.views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../compiler_gym/wrappers.html">compiler_gym.wrappers</a></li>
</ul>
<p><span class="caption-text">C++ API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">compiler_gym/envs/llvm/service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#actionspace-h">ActionSpace.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="#benchmark-h">Benchmark.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="#benchmarkfactory-h">BenchmarkFactory.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cost-h">Cost.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="#llvmsession-h">LlvmSession.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="#observationspaces-h">ObservationSpaces.h</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../service.html">compiler_gym/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../service/runtime.html">compiler_gym/service/runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../util.html">compiler_gym/util</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">CompilerGym</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>compiler_gym/envs/llvm/service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/cc/compiler_gym/envs/llvm/service.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="compiler-gym-envs-llvm-service">
<h1>compiler_gym/envs/llvm/service<a class="headerlink" href="#compiler-gym-envs-llvm-service" title="Permalink to this headline">¶</a></h1>
<p>This directory contains the core C++ implementation of the LLVM environment for
CompilerGym. The base session is implemented by a
<code class="code docutils literal notranslate"><span class="pre">compiler_gym::llvm_service::LlvmSession</span></code> class, defined in
<a class="reference internal" href="#llvmsession-h"><span class="std std-ref">LlvmSession.h</span></a>.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#actionspace-h" id="id1">ActionSpace.h</a></p></li>
<li><p><a class="reference internal" href="#benchmark-h" id="id2">Benchmark.h</a></p></li>
<li><p><a class="reference internal" href="#benchmarkfactory-h" id="id3">BenchmarkFactory.h</a></p></li>
<li><p><a class="reference internal" href="#cost-h" id="id4">Cost.h</a></p></li>
<li><p><a class="reference internal" href="#llvmsession-h" id="id5">LlvmSession.h</a></p></li>
<li><p><a class="reference internal" href="#observationspaces-h" id="id6">ObservationSpaces.h</a></p></li>
</ul>
</div>
<section id="actionspace-h">
<h2><a class="toc-backref" href="#id1">ActionSpace.h</a><a class="headerlink" href="#actionspace-h" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;compiler_gym/envs/llvm/service/ActionSpace.h&quot;</span></code></p>
<dl class="cpp type">
<dt id="_CPPv412compiler_gym">
<span id="_CPPv312compiler_gym"></span><span id="_CPPv212compiler_gym"></span><span id="compiler_gym"></span><span class="target" id="namespacecompiler__gym"></span><em class="property">namespace </em><code class="sig-name descname">compiler_gym</code><a class="headerlink" href="#_CPPv412compiler_gym" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="cpp type">
<dt id="_CPPv4N12compiler_gym12llvm_serviceE">
<span id="_CPPv3N12compiler_gym12llvm_serviceE"></span><span id="_CPPv2N12compiler_gym12llvm_serviceE"></span><span id="compiler_gym::llvm_service"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service"></span><em class="property">namespace </em><code class="sig-name descname">llvm_service</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_serviceE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="cpp enum">
<dt id="_CPPv4N12compiler_gym12llvm_service15LlvmActionSpaceE">
<span id="_CPPv3N12compiler_gym12llvm_service15LlvmActionSpaceE"></span><span id="_CPPv2N12compiler_gym12llvm_service15LlvmActionSpaceE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a8dcaf4b5adeb92a9dbb590fc9ce7cb23"></span><em class="property">enum </em><code class="sig-name descname">LlvmActionSpace</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service15LlvmActionSpaceE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The available action spaces for LLVM. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementation housekeeping rules - to add a new action space:<ol class="upperalpha simple">
<li><p>Add a new entry to this LlvmActionSpace enum.</p></li>
<li><p>Add a new switch case to getLlvmActionSpaceList() to return the ActionSpace.</p></li>
<li><p>Add a new switch case to LlvmSession::step() to compute the actual action.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">test</span> <span class="pre">//compiler_gym/...</span></code> and update the newly failing tests. </p></li>
</ol>
</p>
</div>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service15LlvmActionSpace10PASSES_ALLE">
<span id="_CPPv3N12compiler_gym12llvm_service15LlvmActionSpace10PASSES_ALLE"></span><span id="_CPPv2N12compiler_gym12llvm_service15LlvmActionSpace10PASSES_ALLE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a8dcaf4b5adeb92a9dbb590fc9ce7cb23a21fc2d3dfaf474b43731db488de03d45"></span><em class="property">enumerator </em><code class="sig-name descname">PASSES_ALL</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service15LlvmActionSpace10PASSES_ALLE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The full set of transform passes for LLVM. </p>
</dd></dl>

</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
<section id="benchmark-h">
<h2><a class="toc-backref" href="#id2">Benchmark.h</a><a class="headerlink" href="#benchmark-h" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;compiler_gym/envs/llvm/service/Benchmark.h&quot;</span></code></p>
<dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym"></span><em class="property">namespace </em><code class="sig-name descname">compiler_gym</code><br /></dt>
<dd><dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym_1_1llvm__service"></span><em class="property">namespace </em><code class="sig-name descname">llvm_service</code><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt id="_CPPv4N12compiler_gym12llvm_service13BenchmarkHashE">
<span id="_CPPv3N12compiler_gym12llvm_service13BenchmarkHashE"></span><span id="_CPPv2N12compiler_gym12llvm_service13BenchmarkHashE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1ae6d0a24c25c7637ca77d42ee246ba37e"></span><em class="property">using </em><code class="sig-name descname">BenchmarkHash</code> = llvm::ModuleHash<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service13BenchmarkHashE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A 160 bits SHA1 that identifies an LLVM module. </p>
</dd></dl>

<dl class="cpp type">
<dt id="_CPPv4N12compiler_gym12llvm_service7BitcodeE">
<span id="_CPPv3N12compiler_gym12llvm_service7BitcodeE"></span><span id="_CPPv2N12compiler_gym12llvm_service7BitcodeE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1aa46537695f01e01971a085c6b3f58bef"></span><em class="property">using </em><code class="sig-name descname">Bitcode</code> = llvm::SmallString&lt;0&gt;<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service7BitcodeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A bitcode. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service15readBitcodeFileERKN5boost10filesystem4pathEP7Bitcode">
<span id="_CPPv3N12compiler_gym12llvm_service15readBitcodeFileERKN5boost10filesystem4pathEP7Bitcode"></span><span id="_CPPv2N12compiler_gym12llvm_service15readBitcodeFileERKN5boost10filesystem4pathEP7Bitcode"></span><span id="compiler_gym::llvm_service::readBitcodeFile__boost::filesystem::pathCR.BitcodeP"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a9e3e2a3e5e6d3ca7c90aabc5b05c3675"></span>grpc::Status <code class="sig-name descname">readBitcodeFile</code><span class="sig-paren">(</span><em class="property">const</em> boost::filesystem::path &amp;<em>path</em>, <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service7BitcodeE" title="compiler_gym::llvm_service::Bitcode">Bitcode</a> *<em>bitcode</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service15readBitcodeFileERKN5boost10filesystem4pathEP7Bitcode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read a bitcode file from disk. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – The path of the bitcode file to read. </p></li>
<li><p><strong>bitcode</strong> – The destination bitcode. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, <code class="docutils literal notranslate"><span class="pre">NOT_FOUND</span></code> if the file is not found, or <code class="docutils literal notranslate"><span class="pre">INVALID_ARGUMENT</span></code> if the file is invalid. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service10makeModuleERN4llvm11LLVMContextERK7BitcodeRKNSt6stringEPN4grpc6StatusE">
<span id="_CPPv3N12compiler_gym12llvm_service10makeModuleERN4llvm11LLVMContextERK7BitcodeRKNSt6stringEPN4grpc6StatusE"></span><span id="_CPPv2N12compiler_gym12llvm_service10makeModuleERN4llvm11LLVMContextERK7BitcodeRKNSt6stringEPN4grpc6StatusE"></span><span id="compiler_gym::llvm_service::makeModule__llvm::LLVMContextR.BitcodeCR.ssCR.grpc::StatusP"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a15f1cb65ddc3e38432fc7ce814fad6d7"></span>std::unique_ptr&lt;llvm::Module&gt; <code class="sig-name descname">makeModule</code><span class="sig-paren">(</span>llvm::LLVMContext &amp;<em>context</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service7BitcodeE" title="compiler_gym::llvm_service::Bitcode">Bitcode</a> &amp;<em>bitcode</em>, <em class="property">const</em> std::string &amp;<em>name</em>, grpc::Status *<em>status</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service10makeModuleERN4llvm11LLVMContextERK7BitcodeRKNSt6stringEPN4grpc6StatusE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct an LLVM module from a bitcode. </p>
<p>Parses the given bitcode into a module and strips the identifying <code class="docutils literal notranslate"><span class="pre">ModuleID</span></code> and <code class="docutils literal notranslate"><span class="pre">source_filename</span></code> attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>context</strong> – An LLVM context for the new module. </p></li>
<li><p><strong>bitcode</strong> – The bitcode to parse. </p></li>
<li><p><strong>name</strong> – The name of the module. </p></li>
<li><p><strong>status</strong> – An error status that is set to <code class="docutils literal notranslate"><span class="pre">OK</span></code> on success or <code class="docutils literal notranslate"><span class="pre">INVALID_ARGUMENT</span></code> if the bitcode cannot be parsed. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A unique pointer to an LLVM module, or <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> on error and sets <code class="docutils literal notranslate"><span class="pre">status</span></code>. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="cpp class">
<dt id="_CPPv4N12compiler_gym12llvm_service9BenchmarkE">
<span id="_CPPv3N12compiler_gym12llvm_service9BenchmarkE"></span><span id="_CPPv2N12compiler_gym12llvm_service9BenchmarkE"></span><span id="compiler_gym::llvm_service::Benchmark"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark"></span><em class="property">class </em><code class="sig-name descname">Benchmark</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;Benchmark.h&gt;</em><p>An LLVM module and the LLVM context that owns it. </p>
<p>A benchmark is mutable and can be changed over the course of a session. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringERK7BitcodeRKN5boost10filesystem4pathERK13BaselineCosts">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringERK7BitcodeRKN5boost10filesystem4pathERK13BaselineCosts"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringERK7BitcodeRKN5boost10filesystem4pathERK13BaselineCosts"></span><span id="compiler_gym::llvm_service::Benchmark::Benchmark__ssCR.BitcodeCR.boost::filesystem::pathCR.BaselineCostsCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a038368ed59c0ecf65f7048ab35dc7815"></span><code class="sig-name descname">Benchmark</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>name</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service7BitcodeE" title="compiler_gym::llvm_service::Bitcode">Bitcode</a> &amp;<em>bitcode</em>, <em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service13BaselineCostsE" title="compiler_gym::llvm_service::BaselineCosts">BaselineCosts</a> &amp;<em>baselineCosts</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringERK7BitcodeRKN5boost10filesystem4pathERK13BaselineCosts" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct a benchmark from a bitcode. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringENSt10unique_ptrIN4llvm11LLVMContextEEENSt10unique_ptrIN4llvm6ModuleEEE6size_tRKN5boost10filesystem4pathERK13BaselineCosts">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringENSt10unique_ptrIN4llvm11LLVMContextEEENSt10unique_ptrIN4llvm6ModuleEEE6size_tRKN5boost10filesystem4pathERK13BaselineCosts"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringENSt10unique_ptrIN4llvm11LLVMContextEEENSt10unique_ptrIN4llvm6ModuleEEE6size_tRKN5boost10filesystem4pathERK13BaselineCosts"></span><span id="compiler_gym::llvm_service::Benchmark::Benchmark__ssCR.std::unique_ptr:llvm::LLVMContext:.std::unique_ptr:llvm::Module:.s.boost::filesystem::pathCR.BaselineCostsCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1aa22f82c405be30c9a780d15dcc5316b7"></span><code class="sig-name descname">Benchmark</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>name</em>, std::unique_ptr&lt;llvm::LLVMContext&gt; <em>context</em>, std::unique_ptr&lt;llvm::Module&gt; <em>module</em>, size_t <em>bitcodeSize</em>, <em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service13BaselineCostsE" title="compiler_gym::llvm_service::BaselineCosts">BaselineCosts</a> &amp;<em>baselineCosts</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark9BenchmarkERKNSt6stringENSt10unique_ptrIN4llvm11LLVMContextEEENSt10unique_ptrIN4llvm6ModuleEEE6size_tRKN5boost10filesystem4pathERK13BaselineCosts" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct a benchmark from an LLVM module. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark5cloneERKN5boost10filesystem4pathE">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark5cloneERKN5boost10filesystem4pathE"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark5cloneERKN5boost10filesystem4pathE"></span><span id="compiler_gym::llvm_service::Benchmark::clone__boost::filesystem::pathCRC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a4234f9e03f4558ca4f3a9f27085fd6c6"></span>std::unique_ptr&lt;<a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a>&gt; <code class="sig-name descname">clone</code><span class="sig-paren">(</span><em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark5cloneERKN5boost10filesystem4pathE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Make a copy of the benchmark. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workingDirectory</strong> – The working directory for the new benchmark. </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A copy of the benchmark. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark11module_hashEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark11module_hashEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark11module_hashEv"></span><span id="compiler_gym::llvm_service::Benchmark::module_hashC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a7641673b64459bc6cc52611dbe5a8ad1"></span><a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service13BenchmarkHashE" title="compiler_gym::llvm_service::BenchmarkHash">BenchmarkHash</a> <code class="sig-name descname">module_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark11module_hashEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute and return a SHA1 hash of the module. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A SHA1 hash of the module. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark13verify_moduleEv">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark13verify_moduleEv"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark13verify_moduleEv"></span><span id="compiler_gym::llvm_service::Benchmark::verify_module"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1aa8064c051f794bee07713d40680a5ef5"></span>grpc::Status <code class="sig-name descname">verify_module</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark13verify_moduleEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wrapper around <code class="docutils literal notranslate"><span class="pre">llvm::verifyModule()</span></code> which returns an error status on failure. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, else <code class="docutils literal notranslate"><span class="pre">DATA_LOSS</span></code> if verification fails. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark4nameEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark4nameEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark4nameEv"></span><span id="compiler_gym::llvm_service::Benchmark::nameC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a340f8df0ff551b2283275344120fcaad"></span><em class="property">inline</em> <em class="property">const</em> std::string &amp;<code class="sig-name descname">name</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark4nameEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The name of the benchmark. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark11bitcodeSizeEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark11bitcodeSizeEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark11bitcodeSizeEv"></span><span id="compiler_gym::llvm_service::Benchmark::bitcodeSizeC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1af8d8339ef55d56d96d62c7f3e1877adb"></span><em class="property">inline</em> <em class="property">const</em> size_t <code class="sig-name descname">bitcodeSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark11bitcodeSizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The size of the bitcode that was parsed to produce the initial benchmark. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark6moduleEv">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark6moduleEv"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark6moduleEv"></span><span id="compiler_gym::llvm_service::Benchmark::module"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a94517c1d188a57cd076aca2eab873d8f"></span><em class="property">inline</em> llvm::Module &amp;<code class="sig-name descname">module</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark6moduleEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The underlying LLVM module. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark6moduleEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark6moduleEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark6moduleEv"></span><span id="compiler_gym::llvm_service::Benchmark::moduleC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1afa8db6c46fe07be54b214316fc33f911"></span><em class="property">inline</em> <em class="property">const</em> llvm::Module &amp;<code class="sig-name descname">module</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark6moduleEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The underlying LLVM module. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark7contextEv">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark7contextEv"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark7contextEv"></span><span id="compiler_gym::llvm_service::Benchmark::context"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a9bce97d89f0cd1f5341d9d649f648bee"></span><em class="property">inline</em> llvm::LLVMContext &amp;<code class="sig-name descname">context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark7contextEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The underlying LLVM context. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark7contextEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark7contextEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark7contextEv"></span><span id="compiler_gym::llvm_service::Benchmark::contextC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a2a2666e033e87f344f7fbcdd8baf80ab"></span><em class="property">inline</em> <em class="property">const</em> llvm::LLVMContext &amp;<code class="sig-name descname">context</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark7contextEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The underlying LLVM context. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark13baselineCostsEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark13baselineCostsEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark13baselineCostsEv"></span><span id="compiler_gym::llvm_service::Benchmark::baselineCostsC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a4180fa87413545a4b4a2533339239b58"></span><em class="property">inline</em> <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service13BaselineCostsE" title="compiler_gym::llvm_service::BaselineCosts">BaselineCosts</a> &amp;<code class="sig-name descname">baselineCosts</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark13baselineCostsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark11context_ptrEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark11context_ptrEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark11context_ptrEv"></span><span id="compiler_gym::llvm_service::Benchmark::context_ptrC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a6bcb025801d799c0a0339852471153ef"></span><em class="property">inline</em> <em class="property">const</em> llvm::LLVMContext *<code class="sig-name descname">context_ptr</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark11context_ptrEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A pointer to the underlying LLVM context. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service9Benchmark10module_ptrEv">
<span id="_CPPv3NK12compiler_gym12llvm_service9Benchmark10module_ptrEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service9Benchmark10module_ptrEv"></span><span id="compiler_gym::llvm_service::Benchmark::module_ptrC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a93b18d39853937b690613747b97c4780"></span><em class="property">inline</em> <em class="property">const</em> llvm::Module *<code class="sig-name descname">module_ptr</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service9Benchmark10module_ptrEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A pointer to the underlying LLVM module. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark13replaceModuleENSt10unique_ptrIN4llvm6ModuleEEE">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark13replaceModuleENSt10unique_ptrIN4llvm6ModuleEEE"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark13replaceModuleENSt10unique_ptrIN4llvm6ModuleEEE"></span><span id="compiler_gym::llvm_service::Benchmark::replaceModule__std::unique_ptr:llvm::Module:"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a479d54f94fc955d962bae6f0194c8af9"></span><em class="property">inline</em> void <code class="sig-name descname">replaceModule</code><span class="sig-paren">(</span>std::unique_ptr&lt;llvm::Module&gt; <em>module</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark13replaceModuleENSt10unique_ptrIN4llvm6ModuleEEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Replace the benchmark module with a new one. </p>
<p>This is to enable out-of-process modification of the IR by serializing the benchmark to a file, modifying the file, then loading the modified file and updating the module pointer here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>module</strong> – A new module. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark8context_E">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark8context_E"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark8context_E"></span><span id="compiler_gym::llvm_service::Benchmark::context___std::unique_ptr:llvm::LLVMContext:"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a1a52d643ab3f03c069a8967d34327f32"></span>std::unique_ptr&lt;llvm::LLVMContext&gt; <code class="sig-name descname">context_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark8context_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark7module_E">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark7module_E"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark7module_E"></span><span id="compiler_gym::llvm_service::Benchmark::module___std::unique_ptr:llvm::Module:"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1a53dd00260dc971bd5fc0d4fe2b47c481"></span>std::unique_ptr&lt;llvm::Module&gt; <code class="sig-name descname">module_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark7module_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark14baselineCosts_E">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark14baselineCosts_E"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark14baselineCosts_E"></span><span id="compiler_gym::llvm_service::Benchmark::baselineCosts___BaselineCostsC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1af54cad44f62556650a88632e6663aeca"></span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service13BaselineCostsE" title="compiler_gym::llvm_service::BaselineCosts">BaselineCosts</a> <code class="sig-name descname">baselineCosts_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark14baselineCosts_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark5name_E">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark5name_E"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark5name_E"></span><span id="compiler_gym::llvm_service::Benchmark::name___ssC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1adbf8113e7658a5d1d5919f7fd830e78a"></span><em class="property">const</em> std::string <code class="sig-name descname">name_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark5name_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service9Benchmark12bitcodeSize_E">
<span id="_CPPv3N12compiler_gym12llvm_service9Benchmark12bitcodeSize_E"></span><span id="_CPPv2N12compiler_gym12llvm_service9Benchmark12bitcodeSize_E"></span><span id="compiler_gym::llvm_service::Benchmark::bitcodeSize___sC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_1ae14b8ec21f04562a679130906740b6e7"></span><em class="property">const</em> size_t <code class="sig-name descname">bitcodeSize_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service9Benchmark12bitcodeSize_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</dd></dl>

</dd></dl>

</section>
<section id="benchmarkfactory-h">
<h2><a class="toc-backref" href="#id3">BenchmarkFactory.h</a><a class="headerlink" href="#benchmarkfactory-h" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;compiler_gym/envs/llvm/service/BenchmarkFactory.h&quot;</span></code></p>
<dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym"></span><em class="property">namespace </em><code class="sig-name descname">compiler_gym</code><br /></dt>
<dd><dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym_1_1llvm__service"></span><em class="property">namespace </em><code class="sig-name descname">llvm_service</code><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service23kMaxLoadedBenchmarkSizeE">
<span id="_CPPv3N12compiler_gym12llvm_service23kMaxLoadedBenchmarkSizeE"></span><span id="_CPPv2N12compiler_gym12llvm_service23kMaxLoadedBenchmarkSizeE"></span><span id="compiler_gym::llvm_service::kMaxLoadedBenchmarkSize__s"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1af7db58f9b7c3501df2160a527b171e03"></span><em class="property">constexpr</em> size_t <code class="sig-name descname">kMaxLoadedBenchmarkSize</code> = 512 * 1024 * 1024<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service23kMaxLoadedBenchmarkSizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Maximum number of bytes before benchmark cache eviction. </p>
<p>Benchmarks are loaded from disk and cached in-memory so that future uses do not require a disk access. The number of benchmarks that may be simultaneously loaded is limited by the combined size of the bitcodes, in bytes. Once this size is reached, benchmarks are offloaded so that they must be re-read from disk. </p>
</dd></dl>

</div>
<dl class="cpp class">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryE">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactoryE"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactoryE"></span><span id="compiler_gym::llvm_service::BenchmarkFactory"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory"></span><em class="property">class </em><code class="sig-name descname">BenchmarkFactory</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;BenchmarkFactory.h&gt;</em><p>A factory object for instantiating LLVM modules for use in optimization sessions. </p>
<p>Example usage:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BenchmarkFactory</span> <span class="n">factory</span><span class="p">;</span>
<span class="n">auto</span> <span class="n">benchmark</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">getBenchmark</span><span class="p">(</span><span class="s2">&quot;file:////tmp/my_bitcode.bc&quot;</span><span class="p">);</span>
<span class="o">//</span> <span class="o">...</span> <span class="n">do</span> <span class="n">fun</span> <span class="n">stuff</span>
</pre></div>
</div>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory12getBenchmarkERKN12compiler_gym9BenchmarkEPNSt10unique_ptrI9BenchmarkEE">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory12getBenchmarkERKN12compiler_gym9BenchmarkEPNSt10unique_ptrI9BenchmarkEE"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory12getBenchmarkERKN12compiler_gym9BenchmarkEPNSt10unique_ptrI9BenchmarkEE"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::getBenchmark__compiler_gym::BenchmarkCR.std::unique_ptr:Benchmark:P"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a668b8df32986574bd0f3e84dd489bedb"></span>grpc::Status <code class="sig-name descname">getBenchmark</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv412compiler_gym" title="compiler_gym">compiler_gym</a>::Benchmark &amp;<em>benchmarkMessage</em>, std::unique_ptr&lt;<a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a>&gt; *<em>benchmark</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory12getBenchmarkERKN12compiler_gym9BenchmarkEPNSt10unique_ptrI9BenchmarkEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the requested named benchmark. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>benchmarkMessage</strong> – A <a class="reference internal" href="#classcompiler__gym_1_1llvm__service_1_1_benchmark"><span class="std std-ref">Benchmark</span></a> protocol message. </p></li>
<li><p><strong>benchmark</strong> – A benchmark instance to assign this benchmark to. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, or <code class="docutils literal notranslate"><span class="pre">INVALID_ARGUMENT</span></code> if the protocol message is invalid. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory12getSingletonERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory12getSingletonERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory12getSingletonERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::getSingleton__boost::filesystem::pathCR.std::optional:std::mt19937_64:.s"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a7f911e4991c598b92b1b3bd297ce7c61"></span><em class="property">static</em> <em class="property">inline</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryE" title="compiler_gym::llvm_service::BenchmarkFactory">BenchmarkFactory</a> &amp;<code class="sig-name descname">getSingleton</code><span class="sig-paren">(</span><em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em>, std::optional&lt;std::mt19937_64&gt; <em>rand</em> = std::nullopt, size_t <em>maxLoadedBenchmarkSize</em> = <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service23kMaxLoadedBenchmarkSizeE" title="compiler_gym::llvm_service::kMaxLoadedBenchmarkSize">kMaxLoadedBenchmarkSize</a><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory12getSingletonERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the global benchmark factory singleton. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workingDirectory</strong> – The working directory. </p></li>
<li><p><strong>rand</strong> – An optional random number generator. This is used for cache evictions. </p></li>
<li><p><strong>maxLoadedBenchmarkSize</strong> – The maximum size in bytes of the benchmark cache before evictions. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The benchmark factory singleton instance. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERK7Bitcode">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERK7Bitcode"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERK7Bitcode"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::addBitcode__ssCR.BitcodeCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1ae1840cce33ab4c787a85a81b9cef56ff"></span>grpc::Status <code class="sig-name descname">addBitcode</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>uri</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service7BitcodeE" title="compiler_gym::llvm_service::Bitcode">Bitcode</a> &amp;<em>bitcode</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERK7Bitcode" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERKN5boost10filesystem4pathE">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERKN5boost10filesystem4pathE"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERKN5boost10filesystem4pathE"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::addBitcode__ssCR.boost::filesystem::pathCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a8f2cff9252a56cbfe7c7d6b538a8fc0d"></span>grpc::Status <code class="sig-name descname">addBitcode</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>uri</em>, <em class="property">const</em> boost::filesystem::path &amp;<em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory10addBitcodeERKNSt6stringERKN5boost10filesystem4pathE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::BenchmarkFactory__boost::filesystem::pathCR.std::optional:std::mt19937_64:.s"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1aa019d7c5d05e9b498ae5395d805331bb"></span><code class="sig-name descname">BenchmarkFactory</code><span class="sig-paren">(</span><em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em>, std::optional&lt;std::mt19937_64&gt; <em>rand</em> = std::nullopt, size_t <em>maxLoadedBenchmarkSize</em> = <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service23kMaxLoadedBenchmarkSizeE" title="compiler_gym::llvm_service::kMaxLoadedBenchmarkSize">kMaxLoadedBenchmarkSize</a><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERKN5boost10filesystem4pathENSt8optionalINSt10mt19937_64EEE6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct a benchmark factory. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workingDirectory</strong> – A filesystem directory to use for storing temporary files. </p></li>
<li><p><strong>rand</strong> – is a random seed used to control the selection of random benchmarks. </p></li>
<li><p><strong>maxLoadedBenchmarkSize</strong> – is the maximum combined size of the bitcodes that may be cached in memory. Once this size is reached, benchmarks are offloaded so that they must be re-read from disk. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERK16BenchmarkFactory">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERK16BenchmarkFactory"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERK16BenchmarkFactory"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::BenchmarkFactory__BenchmarkFactoryCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a868d16550bfa26bf52c166ec9bb68467"></span><code class="sig-name descname">BenchmarkFactory</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERK16BenchmarkFactory" title="compiler_gym::llvm_service::BenchmarkFactory::BenchmarkFactory">BenchmarkFactory</a>&amp;<span class="sig-paren">)</span> = delete<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory16BenchmarkFactoryERK16BenchmarkFactory" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryaSERK16BenchmarkFactory">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactoryaSERK16BenchmarkFactory"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactoryaSERK16BenchmarkFactory"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::assign-operator__BenchmarkFactoryCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1aa33952edb5390cc78da6c1de4de416e1"></span><a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryE" title="compiler_gym::llvm_service::BenchmarkFactory">BenchmarkFactory</a> &amp;<code class="sig-name descname">operator=</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryE" title="compiler_gym::llvm_service::BenchmarkFactory">BenchmarkFactory</a>&amp;<span class="sig-paren">)</span> = delete<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactoryaSERK16BenchmarkFactory" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory11benchmarks_E">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory11benchmarks_E"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory11benchmarks_E"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::benchmarks___std::unordered_map:ss.Benchmark:"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a74504854c796981c4764be613cde2378"></span>std::unordered_map&lt;std::string, <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a>&gt; <code class="sig-name descname">benchmarks_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory11benchmarks_E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A mapping from URI to benchmarks which have been loaded into memory. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory17workingDirectory_E">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory17workingDirectory_E"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory17workingDirectory_E"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::workingDirectory___boost::filesystem::pathC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1ab06d0fdc0b27d637b9daa93fee43623c"></span><em class="property">const</em> boost::filesystem::path <code class="sig-name descname">workingDirectory_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory17workingDirectory_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory5rand_E">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory5rand_E"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory5rand_E"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::rand___std::mt19937_64"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a698bebdfd98bdfd1730a6b8f06e8cf4c"></span>std::mt19937_64 <code class="sig-name descname">rand_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory5rand_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory21loadedBenchmarksSize_E">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory21loadedBenchmarksSize_E"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory21loadedBenchmarksSize_E"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::loadedBenchmarksSize___s"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a3664d6a657cca18a809135442335e7ae"></span>size_t <code class="sig-name descname">loadedBenchmarksSize_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory21loadedBenchmarksSize_E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The current and maximum allowed sizes of the loaded benchmarks. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory23maxLoadedBenchmarkSize_E">
<span id="_CPPv3N12compiler_gym12llvm_service16BenchmarkFactory23maxLoadedBenchmarkSize_E"></span><span id="_CPPv2N12compiler_gym12llvm_service16BenchmarkFactory23maxLoadedBenchmarkSize_E"></span><span id="compiler_gym::llvm_service::BenchmarkFactory::maxLoadedBenchmarkSize___sC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_benchmark_factory_1a64338743788ef6040592268cd71ef38f"></span><em class="property">const</em> size_t <code class="sig-name descname">maxLoadedBenchmarkSize_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16BenchmarkFactory23maxLoadedBenchmarkSize_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</dd></dl>

</dd></dl>

</section>
<section id="cost-h">
<h2><a class="toc-backref" href="#id4">Cost.h</a><a class="headerlink" href="#cost-h" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;compiler_gym/envs/llvm/service/Cost.h&quot;</span></code></p>
<dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym"></span><em class="property">namespace </em><code class="sig-name descname">compiler_gym</code><br /></dt>
<dd><dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym_1_1llvm__service"></span><em class="property">namespace </em><code class="sig-name descname">llvm_service</code><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt id="_CPPv4N12compiler_gym12llvm_service13BaselineCostsE">
<span id="_CPPv3N12compiler_gym12llvm_service13BaselineCostsE"></span><span id="_CPPv2N12compiler_gym12llvm_service13BaselineCostsE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a669c4e889912d6033082b6388ade0de9"></span><em class="property">using </em><code class="sig-name descname">BaselineCosts</code> = std::array&lt;double, <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16numBaselineCostsE" title="compiler_gym::llvm_service::numBaselineCosts">numBaselineCosts</a>&gt;<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service13BaselineCostsE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp type">
<dt id="_CPPv4N12compiler_gym12llvm_service13PreviousCostsE">
<span id="_CPPv3N12compiler_gym12llvm_service13PreviousCostsE"></span><span id="_CPPv2N12compiler_gym12llvm_service13PreviousCostsE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a16998736b6ccd262c5f91b6f6ec157c9"></span><em class="property">using </em><code class="sig-name descname">PreviousCosts</code> = std::array&lt;std::optional&lt;double&gt;, <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service8numCostsE" title="compiler_gym::llvm_service::numCosts">numCosts</a>&gt;<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service13PreviousCostsE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="cpp enum">
<dt id="_CPPv4N12compiler_gym12llvm_service16LlvmCostFunctionE">
<span id="_CPPv3N12compiler_gym12llvm_service16LlvmCostFunctionE"></span><span id="_CPPv2N12compiler_gym12llvm_service16LlvmCostFunctionE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a676816b5f86330c9e319b1b073537804"></span><em class="property">enum </em><code class="sig-name descname">LlvmCostFunction</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16LlvmCostFunctionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A cost function for LLVM benchmarks. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service16LlvmCostFunction20IR_INSTRUCTION_COUNTE">
<span id="_CPPv3N12compiler_gym12llvm_service16LlvmCostFunction20IR_INSTRUCTION_COUNTE"></span><span id="_CPPv2N12compiler_gym12llvm_service16LlvmCostFunction20IR_INSTRUCTION_COUNTE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a676816b5f86330c9e319b1b073537804aef98d48a96b9673878b0e977dd288b6c"></span><em class="property">enumerator </em><code class="sig-name descname">IR_INSTRUCTION_COUNT</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16LlvmCostFunction20IR_INSTRUCTION_COUNTE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of instructions in the LLVM-IR module. </p>
<p>IR instruction count is fast to compute and deterministic. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service16LlvmCostFunction22OBJECT_TEXT_SIZE_BYTESE">
<span id="_CPPv3N12compiler_gym12llvm_service16LlvmCostFunction22OBJECT_TEXT_SIZE_BYTESE"></span><span id="_CPPv2N12compiler_gym12llvm_service16LlvmCostFunction22OBJECT_TEXT_SIZE_BYTESE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a676816b5f86330c9e319b1b073537804a0a22c5415ac9a6631852f7631224ed0d"></span><em class="property">enumerator </em><code class="sig-name descname">OBJECT_TEXT_SIZE_BYTES</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16LlvmCostFunction22OBJECT_TEXT_SIZE_BYTESE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the size (in bytes) of the .TEXT section of the compiled module. </p>
</dd></dl>

</dd></dl>

<dl class="cpp enum">
<dt id="_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicyE">
<span id="_CPPv3N12compiler_gym12llvm_service18LlvmBaselinePolicyE"></span><span id="_CPPv2N12compiler_gym12llvm_service18LlvmBaselinePolicyE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a9316c5440d513198d6dc40268d1e829c"></span><em class="property">enum </em><code class="sig-name descname">LlvmBaselinePolicy</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicyE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>LLVM’s builtin policies. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicy2O0E">
<span id="_CPPv3N12compiler_gym12llvm_service18LlvmBaselinePolicy2O0E"></span><span id="_CPPv2N12compiler_gym12llvm_service18LlvmBaselinePolicy2O0E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a9316c5440d513198d6dc40268d1e829ca7e6bfed55985b52e9dbfc6df8f291186"></span><em class="property">enumerator </em><code class="sig-name descname">O0</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicy2O0E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>No optimizations. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicy2O3E">
<span id="_CPPv3N12compiler_gym12llvm_service18LlvmBaselinePolicy2O3E"></span><span id="_CPPv2N12compiler_gym12llvm_service18LlvmBaselinePolicy2O3E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a9316c5440d513198d6dc40268d1e829ca9ee25ee8b4d0a573527fcd2f1e73f8c8"></span><em class="property">enumerator </em><code class="sig-name descname">O3</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicy2O3E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">-O3</span></code> optimizations. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicy2OzE">
<span id="_CPPv3N12compiler_gym12llvm_service18LlvmBaselinePolicy2OzE"></span><span id="_CPPv2N12compiler_gym12llvm_service18LlvmBaselinePolicy2OzE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a9316c5440d513198d6dc40268d1e829ca0adaeee8e8df29fe501cf3e675ebde70"></span><em class="property">enumerator </em><code class="sig-name descname">Oz</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicy2OzE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">-Oz</span></code> optimizations. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service7setCostERK16LlvmCostFunctionRN4llvm6ModuleERKN5boost10filesystem4pathEPd">
<span id="_CPPv3N12compiler_gym12llvm_service7setCostERK16LlvmCostFunctionRN4llvm6ModuleERKN5boost10filesystem4pathEPd"></span><span id="_CPPv2N12compiler_gym12llvm_service7setCostERK16LlvmCostFunctionRN4llvm6ModuleERKN5boost10filesystem4pathEPd"></span><span id="compiler_gym::llvm_service::setCost__LlvmCostFunctionCR.llvm::ModuleR.boost::filesystem::pathCR.doubleP"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1ad5987e851a1dc2d74735fe0285697dc1"></span>grpc::Status <code class="sig-name descname">setCost</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16LlvmCostFunctionE" title="compiler_gym::llvm_service::LlvmCostFunction">LlvmCostFunction</a> &amp;<em>costFunction</em>, llvm::Module &amp;<em>module</em>, <em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em>, double *<em>cost</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service7setCostERK16LlvmCostFunctionRN4llvm6ModuleERKN5boost10filesystem4pathEPd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the cost using a given cost function. </p>
<p>A lower cost is better.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>costFunction</strong> – The cost function to use. </p></li>
<li><p><strong>module</strong> – The module to compute the cost for. </p></li>
<li><p><strong>workingDirectory</strong> – A directory that can be used for temporary file storage. </p></li>
<li><p><strong>cost</strong> – The cost to write. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service16setBaselineCostsERN4llvm6ModuleEP13BaselineCostsRKN5boost10filesystem4pathE">
<span id="_CPPv3N12compiler_gym12llvm_service16setBaselineCostsERN4llvm6ModuleEP13BaselineCostsRKN5boost10filesystem4pathE"></span><span id="_CPPv2N12compiler_gym12llvm_service16setBaselineCostsERN4llvm6ModuleEP13BaselineCostsRKN5boost10filesystem4pathE"></span><span id="compiler_gym::llvm_service::setBaselineCosts__llvm::ModuleR.BaselineCostsP.boost::filesystem::pathCR"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a626d61e1880642844b813c844fc7e670"></span>grpc::Status <code class="sig-name descname">setBaselineCosts</code><span class="sig-paren">(</span>llvm::Module &amp;<em>unoptimizedModule</em>, <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service13BaselineCostsE" title="compiler_gym::llvm_service::BaselineCosts">BaselineCosts</a> *<em>baselineCosts</em>, <em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16setBaselineCostsERN4llvm6ModuleEP13BaselineCostsRKN5boost10filesystem4pathE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the costs of baseline policies. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">unoptimizedModule</span></code> parameter is unmodified, but is not const because various LLVM API calls require a mutable reference.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unoptimizedModule</strong> – The module to compute the baseline costs of. </p></li>
<li><p><strong>baselineCosts</strong> – The costs to write. </p></li>
<li><p><strong>workingDirectory</strong> – A directory that can be used for temporary file storage. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service8numCostsE">
<span id="_CPPv3N12compiler_gym12llvm_service8numCostsE"></span><span id="_CPPv2N12compiler_gym12llvm_service8numCostsE"></span><span id="compiler_gym::llvm_service::numCosts__s"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a211ef46b488c0d0d59760c3eef0530fa"></span><em class="property">constexpr</em> size_t <code class="sig-name descname">numCosts</code> = magic_enum::enum_count&lt;<a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service16LlvmCostFunctionE" title="compiler_gym::llvm_service::LlvmCostFunction">LlvmCostFunction</a>&gt;()<a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service8numCostsE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service16numBaselineCostsE">
<span id="_CPPv3N12compiler_gym12llvm_service16numBaselineCostsE"></span><span id="_CPPv2N12compiler_gym12llvm_service16numBaselineCostsE"></span><span id="compiler_gym::llvm_service::numBaselineCosts__s"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1af5641eb2eb188b60619443c4a068029b"></span><em class="property">constexpr</em> size_t <code class="sig-name descname">numBaselineCosts</code> = magic_enum::enum_count&lt;<a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service18LlvmBaselinePolicyE" title="compiler_gym::llvm_service::LlvmBaselinePolicy">LlvmBaselinePolicy</a>&gt;() * <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service8numCostsE" title="compiler_gym::llvm_service::numCosts">numCosts</a><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service16numBaselineCostsE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
<section id="llvmsession-h">
<h2><a class="toc-backref" href="#id5">LlvmSession.h</a><a class="headerlink" href="#llvmsession-h" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;compiler_gym/envs/llvm/service/LlvmSession.h&quot;</span></code></p>
<dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym"></span><em class="property">namespace </em><code class="sig-name descname">compiler_gym</code><br /></dt>
<dd><dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym_1_1llvm__service"></span><em class="property">namespace </em><code class="sig-name descname">llvm_service</code><br /></dt>
<dd><dl class="cpp class">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSessionE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSessionE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSessionE"></span><span id="compiler_gym::llvm_service::LlvmSession"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session"></span><em class="property">class </em><code class="sig-name descname">LlvmSession</code> : <em class="property">public</em> <a class="reference internal" href="#_CPPv412compiler_gym" title="compiler_gym">compiler_gym</a>::<a class="reference internal" href="../../service.html#_CPPv4N12compiler_gym18CompilationSessionE" title="compiler_gym::CompilationSession">CompilationSession</a><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSessionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;LlvmSession.h&gt;</em><p>An interactive LLVM compilation session. </p>
<p>This class exposes the LLVM optimization pipeline for an LLVM module as an interactive environment. It can be used directly as a C++ API, or it can be accessed through an RPC interface using the CompilerGym RPC runtime. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession11LlvmSessionERKN5boost10filesystem4pathE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession11LlvmSessionERKN5boost10filesystem4pathE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession11LlvmSessionERKN5boost10filesystem4pathE"></span><span id="compiler_gym::llvm_service::LlvmSession::LlvmSession__boost::filesystem::pathCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a7bb07a7c9fdc705f90876afc508065a6"></span><code class="sig-name descname">LlvmSession</code><span class="sig-paren">(</span><em class="property">const</em> boost::filesystem::path &amp;<em>workingDirectory</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession11LlvmSessionERKN5boost10filesystem4pathE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service11LlvmSession18getCompilerVersionEv">
<span id="_CPPv3NK12compiler_gym12llvm_service11LlvmSession18getCompilerVersionEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service11LlvmSession18getCompilerVersionEv"></span><span id="compiler_gym::llvm_service::LlvmSession::getCompilerVersionC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a156e285a3a6d627f072661d02cebe959"></span><em class="property">virtual</em> std::string <code class="sig-name descname">getCompilerVersion</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service11LlvmSession18getCompilerVersionEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the compiler version. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string indicating the compiler version. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service11LlvmSession15getActionSpacesEv">
<span id="_CPPv3NK12compiler_gym12llvm_service11LlvmSession15getActionSpacesEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service11LlvmSession15getActionSpacesEv"></span><span id="compiler_gym::llvm_service::LlvmSession::getActionSpacesC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a8bb29484ab569d07cbc28ff7da8ac995"></span><em class="property">virtual</em> std::vector&lt;ActionSpace&gt; <code class="sig-name descname">getActionSpaces</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service11LlvmSession15getActionSpacesEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A list of action spaces describing the capabilities of the compiler. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of ActionSpace instances. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service11LlvmSession20getObservationSpacesEv">
<span id="_CPPv3NK12compiler_gym12llvm_service11LlvmSession20getObservationSpacesEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service11LlvmSession20getObservationSpacesEv"></span><span id="compiler_gym::llvm_service::LlvmSession::getObservationSpacesC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a86eb3bc6c306634dc502314af3cd1b43"></span><em class="property">virtual</em> std::vector&lt;ObservationSpace&gt; <code class="sig-name descname">getObservationSpaces</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service11LlvmSession20getObservationSpacesEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A list of feature vectors that this compiler provides. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of ObservationSpace instances. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession4initERK11ActionSpaceRKN12compiler_gym9BenchmarkE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession4initERK11ActionSpaceRKN12compiler_gym9BenchmarkE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession4initERK11ActionSpaceRKN12compiler_gym9BenchmarkE"></span><span id="compiler_gym::llvm_service::LlvmSession::init__ActionSpaceCR.compiler_gym::BenchmarkCR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a445411c994f753e563dc50b3b2192777"></span>grpc::Status <code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="property">const</em> ActionSpace &amp;<em>actionSpace</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv412compiler_gym" title="compiler_gym">compiler_gym</a>::Benchmark &amp;<em>benchmark</em><span class="sig-paren">)</span> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession4initERK11ActionSpaceRKN12compiler_gym9BenchmarkE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession4initEP18CompilationSession">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession4initEP18CompilationSession"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession4initEP18CompilationSession"></span><span id="compiler_gym::llvm_service::LlvmSession::init__CompilationSessionP"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a49848b6ac4d133d822b8ab1192dc9d28"></span><em class="property">virtual</em> grpc::Status <code class="sig-name descname">init</code><span class="sig-paren">(</span><a class="reference internal" href="../../service.html#_CPPv4N12compiler_gym18CompilationSessionE" title="compiler_gym::CompilationSession">CompilationSession</a> *<em>other</em><span class="sig-paren">)</span> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession4initEP18CompilationSession" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize a <a class="reference internal" href="../../service.html#classcompiler__gym_1_1_compilation_session"><span class="std std-ref">CompilationSession</span></a> from another CompilerSession. </p>
<p>Think of this like a copy constructor, except that this method is allowed to fail.</p>
<p>This will be called after construction and before <a class="reference internal" href="#classcompiler__gym_1_1llvm__service_1_1_llvm_session_1af49d28829e60c07164db7ab664dbff9a"><span class="std std-ref">applyAction()</span></a> or <a class="reference internal" href="#classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a0ecf4c62a68a6c3c60458f6bd7ef55e9"><span class="std std-ref">computeObservation()</span></a>. This will only be called once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – The <a class="reference internal" href="../../service.html#classcompiler__gym_1_1_compilation_session"><span class="std std-ref">CompilationSession</span></a> to initialize from. </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, else an errro code and message. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession11applyActionERK6ActionRbRNSt8optionalI11ActionSpaceEERb">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession11applyActionERK6ActionRbRNSt8optionalI11ActionSpaceEERb"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession11applyActionERK6ActionRbRNSt8optionalI11ActionSpaceEERb"></span><span id="compiler_gym::llvm_service::LlvmSession::applyAction__ActionCR.bR.std::optional:ActionSpace:R.bR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1af49d28829e60c07164db7ab664dbff9a"></span><em class="property">virtual</em> grpc::Status <code class="sig-name descname">applyAction</code><span class="sig-paren">(</span><em class="property">const</em> Action &amp;<em>action</em>, bool &amp;<em>endOfEpisode</em>, std::optional&lt;ActionSpace&gt; &amp;<em>newActionSpace</em>, bool &amp;<em>actionHadNoEffect</em><span class="sig-paren">)</span> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession11applyActionERK6ActionRbRNSt8optionalI11ActionSpaceEERb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Apply an action. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> – The action to apply. </p></li>
<li><p><strong>newActionSpace</strong> – If applying the action mutated the action space, set this value to the new action space. </p></li>
<li><p><strong>actionHadNoEffect</strong> – If the action had no effect, set this to true. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, else an errro code and message. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession9endOfStepEbRbRNSt8optionalI11ActionSpaceEE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession9endOfStepEbRbRNSt8optionalI11ActionSpaceEE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession9endOfStepEbRbRNSt8optionalI11ActionSpaceEE"></span><span id="compiler_gym::llvm_service::LlvmSession::endOfStep__b.bR.std::optional:ActionSpace:R"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a8dd5caaee5bc3299e6737800ce681589"></span><em class="property">virtual</em> grpc::Status <code class="sig-name descname">endOfStep</code><span class="sig-paren">(</span>bool <em>actionHadNoEffect</em>, bool &amp;<em>endOfEpisode</em>, std::optional&lt;ActionSpace&gt; &amp;<em>newActionSpace</em><span class="sig-paren">)</span> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession9endOfStepEbRbRNSt8optionalI11ActionSpaceEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Optional. </p>
<p>This will be called after all <a class="reference internal" href="#classcompiler__gym_1_1llvm__service_1_1_llvm_session_1af49d28829e60c07164db7ab664dbff9a"><span class="std std-ref">applyAction()</span></a> and <a class="reference internal" href="#classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a0ecf4c62a68a6c3c60458f6bd7ef55e9"><span class="std std-ref">computeObservation()</span></a> in a step. Use this method if you would like to perform post-transform validation of compiler state.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, else an errro code and message. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession18computeObservationERK16ObservationSpaceR11Observation">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession18computeObservationERK16ObservationSpaceR11Observation"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession18computeObservationERK16ObservationSpaceR11Observation"></span><span id="compiler_gym::llvm_service::LlvmSession::computeObservation__ObservationSpaceCR.ObservationR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a0ecf4c62a68a6c3c60458f6bd7ef55e9"></span><em class="property">virtual</em> grpc::Status <code class="sig-name descname">computeObservation</code><span class="sig-paren">(</span><em class="property">const</em> ObservationSpace &amp;<em>observationSpace</em>, Observation &amp;<em>observation</em><span class="sig-paren">)</span> <em class="property">final</em> <em class="property">override</em><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession18computeObservationERK16ObservationSpaceR11Observation" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute an observation. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success, else an errro code and message. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service11LlvmSession11actionSpaceEv">
<span id="_CPPv3NK12compiler_gym12llvm_service11LlvmSession11actionSpaceEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service11LlvmSession11actionSpaceEv"></span><span id="compiler_gym::llvm_service::LlvmSession::actionSpaceC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a2991a44da458c460b077b3747b204e6d"></span><em class="property">inline</em> <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service15LlvmActionSpaceE" title="compiler_gym::llvm_service::LlvmActionSpace">LlvmActionSpace</a> <code class="sig-name descname">actionSpace</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service11LlvmSession11actionSpaceEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession18computeObservationE20LlvmObservationSpaceR11Observation">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession18computeObservationE20LlvmObservationSpaceR11Observation"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession18computeObservationE20LlvmObservationSpaceR11Observation"></span><span id="compiler_gym::llvm_service::LlvmSession::computeObservation__LlvmObservationSpace.ObservationR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a041bce5f30483a37d00ed31dac5f5762"></span>grpc::Status <code class="sig-name descname">computeObservation</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpaceE" title="compiler_gym::llvm_service::LlvmObservationSpace">LlvmObservationSpace</a> <em>observationSpace</em>, Observation &amp;<em>observation</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession18computeObservationE20LlvmObservationSpaceR11Observation" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession4initERK15LlvmActionSpaceNSt10unique_ptrI9BenchmarkEE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession4initERK15LlvmActionSpaceNSt10unique_ptrI9BenchmarkEE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession4initERK15LlvmActionSpaceNSt10unique_ptrI9BenchmarkEE"></span><span id="compiler_gym::llvm_service::LlvmSession::init__LlvmActionSpaceCR.std::unique_ptr:Benchmark:"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a6958ffa59952e6913211d4edf643022a"></span>grpc::Status <code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service15LlvmActionSpaceE" title="compiler_gym::llvm_service::LlvmActionSpace">LlvmActionSpace</a> &amp;<em>actionSpace</em>, std::unique_ptr&lt;<a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a>&gt; <em>benchmark</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession4initERK15LlvmActionSpaceNSt10unique_ptrI9BenchmarkEE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service11LlvmSession9benchmarkEv">
<span id="_CPPv3NK12compiler_gym12llvm_service11LlvmSession9benchmarkEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service11LlvmSession9benchmarkEv"></span><span id="compiler_gym::llvm_service::LlvmSession::benchmarkC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a7d7fd5b62a1d0d1cd128e45437f9d2bb"></span><em class="property">inline</em> <em class="property">const</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a> &amp;<code class="sig-name descname">benchmark</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service11LlvmSession9benchmarkEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession9benchmarkEv">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession9benchmarkEv"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession9benchmarkEv"></span><span id="compiler_gym::llvm_service::LlvmSession::benchmark"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a1384da2e1bfc612add1a6c63c6efdd3e"></span><em class="property">inline</em> <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a> &amp;<code class="sig-name descname">benchmark</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession9benchmarkEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession15applyPassActionE10LlvmActionRb">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession15applyPassActionE10LlvmActionRb"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession15applyPassActionE10LlvmActionRb"></span><span id="compiler_gym::llvm_service::LlvmSession::applyPassAction__LlvmAction.bR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a0eee28fec947acb44d7f77ede139d9b2"></span>grpc::Status <code class="sig-name descname">applyPassAction</code><span class="sig-paren">(</span>LlvmAction <em>action</em>, bool &amp;<em>actionHadNoEffect</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession15applyPassActionE10LlvmActionRb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Run the requested action. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> – An action to apply. </p></li>
<li><p><strong>actionHadNoEffect</strong> – Set to true if LLVM reported that any passes that were run made no modifications to the module. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> on success. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm4PassE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm4PassE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm4PassE"></span><span id="compiler_gym::llvm_service::LlvmSession::runPass__llvm::PassP"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1adb5c634c40fa6b4eef8cb124c7e653f2"></span>bool <code class="sig-name descname">runPass</code><span class="sig-paren">(</span>llvm::Pass *<em>pass</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm4PassE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Run the given pass, possibly modifying the underlying LLVM module. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether the module was modified. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm12FunctionPassE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm12FunctionPassE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm12FunctionPassE"></span><span id="compiler_gym::llvm_service::LlvmSession::runPass__llvm::FunctionPassP"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1ab13e454394d931fe0553b1a0a9a50660"></span>bool <code class="sig-name descname">runPass</code><span class="sig-paren">(</span>llvm::FunctionPass *<em>pass</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession7runPassEPN4llvm12FunctionPassE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Run the given pass, possibly modifying the underlying LLVM module. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether the module was modified. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession14runOptWithArgsERKNSt6vectorINSt6stringEEE">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession14runOptWithArgsERKNSt6vectorINSt6stringEEE"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession14runOptWithArgsERKNSt6vectorINSt6stringEEE"></span><span id="compiler_gym::llvm_service::LlvmSession::runOptWithArgs__std::vector:ss:CR"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a70c8e2f3888715c3b95a37a2453c8cb3"></span>grpc::Status <code class="sig-name descname">runOptWithArgs</code><span class="sig-paren">(</span><em class="property">const</em> std::vector&lt;std::string&gt; &amp;<em>optArgs</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession14runOptWithArgsERKNSt6vectorINSt6stringEEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Run the commandline <code class="docutils literal notranslate"><span class="pre">opt</span></code> tool on the current LLVM module with the given arguments, replacing the environment state with the generated output. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK12compiler_gym12llvm_service11LlvmSession4tliiEv">
<span id="_CPPv3NK12compiler_gym12llvm_service11LlvmSession4tliiEv"></span><span id="_CPPv2NK12compiler_gym12llvm_service11LlvmSession4tliiEv"></span><span id="compiler_gym::llvm_service::LlvmSession::tliiC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1ae780f0beb7796dee397335071c910190"></span><em class="property">inline</em> <em class="property">const</em> llvm::TargetLibraryInfoImpl &amp;<code class="sig-name descname">tlii</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK12compiler_gym12llvm_service11LlvmSession4tliiEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4I00EN12compiler_gym12llvm_service11LlvmSession16setupPassManagerEvP11PassManagerP4Pass">
<span id="_CPPv3I00EN12compiler_gym12llvm_service11LlvmSession16setupPassManagerEP11PassManagerP4Pass"></span><span id="_CPPv2I00EN12compiler_gym12llvm_service11LlvmSession16setupPassManagerEP11PassManagerP4Pass"></span>template&lt;typename <code class="sig-name descname">PassManager</code>, typename <code class="sig-name descname">Pass</code>&gt;<br /><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1ab0c5e600f4734a59c18b0db1f3841197"></span><em class="property">inline</em> void <code class="sig-name descname">setupPassManager</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I00EN12compiler_gym12llvm_service11LlvmSession16setupPassManagerEvP11PassManagerP4Pass" title="compiler_gym::llvm_service::LlvmSession::setupPassManager::PassManager">PassManager</a> *<em>passManager</em>, <a class="reference internal" href="#_CPPv4I00EN12compiler_gym12llvm_service11LlvmSession16setupPassManagerEvP11PassManagerP4Pass" title="compiler_gym::llvm_service::LlvmSession::setupPassManager::Pass">Pass</a> *<em>pass</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I00EN12compiler_gym12llvm_service11LlvmSession16setupPassManagerEvP11PassManagerP4Pass" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Setup pass manager with depdendent passes and the specified pass. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-members">Private Members</p>
<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession16programlOptions_E">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession16programlOptions_E"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession16programlOptions_E"></span><span id="compiler_gym::llvm_service::LlvmSession::programlOptions___programl::ProgramGraphOptionsC"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a3cfbde05ce408470ecefd404053451e7"></span><em class="property">const</em> programl::ProgramGraphOptions <code class="sig-name descname">programlOptions_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession16programlOptions_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession22observationSpaceNames_E">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession22observationSpaceNames_E"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession22observationSpaceNames_E"></span><span id="compiler_gym::llvm_service::LlvmSession::observationSpaceNames___std::unordered_map:ss.LlvmObservationSpace:C"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a5c81064c707daa8166883d728c79008b"></span><em class="property">const</em> std::unordered_map&lt;std::string, <a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpaceE" title="compiler_gym::llvm_service::LlvmObservationSpace">LlvmObservationSpace</a>&gt; <code class="sig-name descname">observationSpaceNames_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession22observationSpaceNames_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession12actionSpace_E">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession12actionSpace_E"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession12actionSpace_E"></span><span id="compiler_gym::llvm_service::LlvmSession::actionSpace___LlvmActionSpace"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a86bf5ba71d03e6e92b7869e595c5492e"></span><a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service15LlvmActionSpaceE" title="compiler_gym::llvm_service::LlvmActionSpace">LlvmActionSpace</a> <code class="sig-name descname">actionSpace_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession12actionSpace_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession10benchmark_E">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession10benchmark_E"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession10benchmark_E"></span><span id="compiler_gym::llvm_service::LlvmSession::benchmark___std::unique_ptr:Benchmark:"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a7d207947ba61f6a6575f3998c3e34027"></span>std::unique_ptr&lt;<a class="reference internal" href="#_CPPv4N12compiler_gym12llvm_service9BenchmarkE" title="compiler_gym::llvm_service::Benchmark">Benchmark</a>&gt; <code class="sig-name descname">benchmark_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession10benchmark_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N12compiler_gym12llvm_service11LlvmSession5tlii_E">
<span id="_CPPv3N12compiler_gym12llvm_service11LlvmSession5tlii_E"></span><span id="_CPPv2N12compiler_gym12llvm_service11LlvmSession5tlii_E"></span><span id="compiler_gym::llvm_service::LlvmSession::tlii___llvm::TargetLibraryInfoImpl"></span><span class="target" id="classcompiler__gym_1_1llvm__service_1_1_llvm_session_1a518e7939b863cb620044faea3d6bb165"></span>llvm::TargetLibraryInfoImpl <code class="sig-name descname">tlii_</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service11LlvmSession5tlii_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</dd></dl>

</dd></dl>

</section>
<section id="observationspaces-h">
<h2><a class="toc-backref" href="#id6">ObservationSpaces.h</a><a class="headerlink" href="#observationspaces-h" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;compiler_gym/envs/llvm/service/ObservationSpaces.h&quot;</span></code></p>
<dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym"></span><em class="property">namespace </em><code class="sig-name descname">compiler_gym</code><br /></dt>
<dd><dl class="cpp type">
<dt>
<span class="target" id="namespacecompiler__gym_1_1llvm__service"></span><em class="property">namespace </em><code class="sig-name descname">llvm_service</code><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="cpp enum">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpaceE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpaceE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpaceE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2e"></span><em class="property">enum </em><code class="sig-name descname">LlvmObservationSpace</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpaceE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The available observation spaces for LLVM. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Housekeeping rules - to add a new observation space:<ol class="upperalpha simple">
<li><p>Add a new entry to this LlvmObservationSpace enum.</p></li>
<li><p>Add a new switch case to getLlvmObservationSpaceList() to return the ObserverationSpace.</p></li>
<li><p>Add a new switch case to LlvmSession::getObservation() to compute the actual observation.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">test</span> <span class="pre">//compiler_gym/...</span></code> and update the newly failing tests. </p></li>
</ol>
</p>
</div>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace2IRE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace2IRE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace2IRE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea4f74d343f26bbd58a8cbbad2cab6a704"></span><em class="property">enumerator </em><code class="sig-name descname">IR</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace2IRE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The entire LLVM module as an IR string. </p>
<p>This allows the user to do their own feature extraction. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace7IR_SHA1E">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace7IR_SHA1E"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace7IR_SHA1E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea721a3df29dd80df4e9ac3ba72f0b9dbd"></span><em class="property">enumerator </em><code class="sig-name descname">IR_SHA1</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace7IR_SHA1E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The 40-digit hex SHA1 checksum of the LLVM module. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace12BITCODE_FILEE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace12BITCODE_FILEE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace12BITCODE_FILEE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea0709de9bad75118c99119eff30165dda"></span><em class="property">enumerator </em><code class="sig-name descname">BITCODE_FILE</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace12BITCODE_FILEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write the bitcode to a file and return its path as a string. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace10INST_COUNTE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace10INST_COUNTE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace10INST_COUNTE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea5ecaefd00f09189a3eb7ae4321072d69"></span><em class="property">enumerator </em><code class="sig-name descname">INST_COUNT</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace10INST_COUNTE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The counts of all instructions in a program. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace9AUTOPHASEE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace9AUTOPHASEE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace9AUTOPHASEE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2eac0e41a9c8ecda73e7f406b6979a9f46b"></span><em class="property">enumerator </em><code class="sig-name descname">AUTOPHASE</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace9AUTOPHASEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The Autophase feature vector. </p>
<p>From: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Huang</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="p">,</span> <span class="n">Haj</span><span class="o">-</span><span class="n">Ali</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span><span class="p">,</span> <span class="n">Moses</span><span class="p">,</span> <span class="n">W</span><span class="o">.</span><span class="p">,</span> <span class="n">Xiang</span><span class="p">,</span> <span class="n">J</span><span class="o">.</span><span class="p">,</span> <span class="n">Stoica</span><span class="p">,</span> <span class="n">I</span><span class="o">.</span><span class="p">,</span> <span class="n">Asanovic</span><span class="p">,</span> <span class="n">K</span><span class="o">.</span><span class="p">,</span>
<span class="o">&amp;</span> <span class="n">Wawrzynek</span><span class="p">,</span> <span class="n">J</span><span class="o">.</span> <span class="p">(</span><span class="mi">2019</span><span class="p">)</span><span class="o">.</span> <span class="n">Autophase</span><span class="p">:</span> <span class="n">Compiler</span> <span class="n">phase</span><span class="o">-</span><span class="n">ordering</span> <span class="k">for</span> <span class="n">HLS</span> <span class="k">with</span>
<span class="n">deep</span> <span class="n">reinforcement</span> <span class="n">learning</span><span class="o">.</span> <span class="n">FCCM</span><span class="o">.</span>
</pre></div>
</div>
 </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace8PROGRAMLE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace8PROGRAMLE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace8PROGRAMLE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2eaf5b7d24661cee99b20044df9d9be84fe"></span><em class="property">enumerator </em><code class="sig-name descname">PROGRAML</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace8PROGRAMLE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the graph representation of a program. </p>
<p>From: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Cummins</span><span class="p">,</span> <span class="n">C</span><span class="o">.</span><span class="p">,</span> <span class="n">Fisches</span><span class="p">,</span> <span class="n">Z</span><span class="o">.</span> <span class="n">V</span><span class="o">.</span><span class="p">,</span> <span class="n">Ben</span><span class="o">-</span><span class="n">Nun</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="p">,</span> <span class="n">Hoefler</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="p">,</span> <span class="o">&amp;</span> <span class="n">Leather</span><span class="p">,</span> <span class="n">H</span><span class="o">.</span>
<span class="p">(</span><span class="mi">2020</span><span class="p">)</span><span class="o">.</span> <span class="n">ProGraML</span><span class="p">:</span> <span class="n">Graph</span><span class="o">-</span><span class="n">based</span> <span class="n">Deep</span> <span class="n">Learning</span> <span class="k">for</span> <span class="n">Program</span> <span class="n">Optimization</span>
<span class="ow">and</span> <span class="n">Analysis</span><span class="o">.</span> <span class="n">ArXiv</span><span class="p">:</span><span class="mf">2003.10536</span><span class="o">.</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">arxiv</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="nb">abs</span><span class="o">/</span><span class="mf">2003.10536</span>
</pre></div>
</div>
 </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace8CPU_INFOE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace8CPU_INFOE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace8CPU_INFOE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea10787d4b7cf389ebb1a2f6a88e442360"></span><em class="property">enumerator </em><code class="sig-name descname">CPU_INFO</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace8CPU_INFOE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A JSON dictionary of properties describing the CPU. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace20IR_INSTRUCTION_COUNTE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace20IR_INSTRUCTION_COUNTE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace20IR_INSTRUCTION_COUNTE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2eaef98d48a96b9673878b0e977dd288b6c"></span><em class="property">enumerator </em><code class="sig-name descname">IR_INSTRUCTION_COUNT</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace20IR_INSTRUCTION_COUNTE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of LLVM-IR instructions in the current module. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O0E">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O0E"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O0E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea84b36ffd6665222c6043405e20b708da"></span><em class="property">enumerator </em><code class="sig-name descname">IR_INSTRUCTION_COUNT_O0</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O0E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of LLVM-IR instructions normalized to <code class="docutils literal notranslate"><span class="pre">-O0</span></code>. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O3E">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O3E"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O3E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea8c7e342402c2fb76110736f546434002"></span><em class="property">enumerator </em><code class="sig-name descname">IR_INSTRUCTION_COUNT_O3</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_O3E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of LLVM-IR instructions normalized to <code class="docutils literal notranslate"><span class="pre">-O3</span></code>. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_OZE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_OZE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_OZE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea30f4747958f8138cf398cd1aa8db7898"></span><em class="property">enumerator </em><code class="sig-name descname">IR_INSTRUCTION_COUNT_OZ</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace23IR_INSTRUCTION_COUNT_OZE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of LLVM-IR instructions normalized to <code class="docutils literal notranslate"><span class="pre">-Oz</span></code>. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace22OBJECT_TEXT_SIZE_BYTESE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace22OBJECT_TEXT_SIZE_BYTESE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace22OBJECT_TEXT_SIZE_BYTESE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea0a22c5415ac9a6631852f7631224ed0d"></span><em class="property">enumerator </em><code class="sig-name descname">OBJECT_TEXT_SIZE_BYTES</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace22OBJECT_TEXT_SIZE_BYTESE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The platform-dependent size of the .text section of the lowered module. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O0E">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O0E"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O0E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2eadce734bad0a2bf1543ba348cfb489cd8"></span><em class="property">enumerator </em><code class="sig-name descname">OBJECT_TEXT_SIZE_O0</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O0E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The platform-dependent size of the .text section of the lowered module. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O3E">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O3E"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O3E"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2eae1f8d8d358019174f8c7c017df345a08"></span><em class="property">enumerator </em><code class="sig-name descname">OBJECT_TEXT_SIZE_O3</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_O3E" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The platform-dependent size of the .text section of the lowered module. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt id="_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_OZE">
<span id="_CPPv3N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_OZE"></span><span id="_CPPv2N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_OZE"></span><span class="target" id="namespacecompiler__gym_1_1llvm__service_1a447c273cfdf5fdb0474b451ab73c4c2ea8fd6ee9bcff52cbf133bb2196405547a"></span><em class="property">enumerator </em><code class="sig-name descname">OBJECT_TEXT_SIZE_OZ</code><a class="headerlink" href="#_CPPv4N12compiler_gym12llvm_service20LlvmObservationSpace19OBJECT_TEXT_SIZE_OZE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The platform-dependent size of the .text section of the lowered module. </p>
</dd></dl>

</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../service.html" class="btn btn-neutral float-right" title="compiler_gym/service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../../../compiler_gym/wrappers.html" class="btn btn-neutral float-left" title="compiler_gym.wrappers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Facebook AI Research

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'G-T95G5EVYXM', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>